<!doctype html>
<html lang="en">
    <head>
        <title>Game</title>
        <style>
            #body, #hand {
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: center;
            }
            #body {
                background-color: bisque;
                background-size: cover;
                height: 100%;
                width: 100%;
            }
            #game-area {
                width: 75%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
            #board {
                background-color: rgb(152, 126, 86);
                display: grid;
                width: 100%;
                height: 100%;
            }
            #tile-area {
                display: grid;
                grid-template-columns: repeat(8, auto);
            }
            .tile-spot {
                background-color: aliceblue;
                padding: 10px;
                width: 100%;
                height: 100%;
            }
            .tile {
                cursor: move;
                z-index: 10;
            }
            #sidebar {
                width: 25%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
            #leave {
                height: 10%;
                width: 100%;
            }
            #chat {
                height: 80%;
                background-color: rgb(152, 126, 86);
                width: 100%;
            }
            #end-turn {
                height: 10%;
                width: 100%;
            }
        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/src/public/css/style.css" />
    </head>
	<body>
        <section id="body">
            <section id="game-area">
                <section id="board">
                    <div id="arrow-up">
                        <button type="button">Up</button>
                    </div>
                    <div id="arrow-left">
                        <button type="button">Left</button>
                    </div>
                    <div id="tile-area">
                        <!--row 1-->
                        <div class="tile-spot" data-coord="(1,1)">1</div>
                        <div class="tile-spot" data-coord="(1,2)">1</div>
                        <div class="tile-spot" data-coord="(1,3)">1</div>
                        <div class="tile-spot" data-coord="(1,4)">1</div>
                        <div class="tile-spot" data-coord="(1,5)">1</div>
                        <div class="tile-spot" data-coord="(1,6)">1</div>
                        <div class="tile-spot" data-coord="(1,7)">1</div>
                        <div class="tile-spot" data-coord="(1,8)">1</div>

                        <!--row 2-->
                        <div class="tile-spot" data-coord="(2,1)">1</div>
                        <div class="tile-spot" data-coord="(2,2)">1</div>
                        <div class="tile-spot" data-coord="(2,3)">1</div>
                        <div class="tile-spot" data-coord="(2,4)">1</div>
                        <div class="tile-spot" data-coord="(2,5)">1</div>
                        <div class="tile-spot" data-coord="(2,6)">1</div>
                        <div class="tile-spot" data-coord="(2,7)">1</div>
                        <div class="tile-spot" data-coord="(2,8)">1</div>

                        <!--row 3-->
                        <div class="tile-spot" data-coord="(3,1)">1</div>
                        <div class="tile-spot" data-coord="(3,2)">1</div>
                        <div class="tile-spot" data-coord="(3,3)">1</div>
                        <div class="tile-spot" data-coord="(3,4)">1</div>
                        <div class="tile-spot" data-coord="(3,5)">1</div>
                        <div class="tile-spot" data-coord="(3,6)">1</div>
                        <div class="tile-spot" data-coord="(3,7)">1</div>
                        <div class="tile-spot" data-coord="(3,8)">1</div>

                        <!--row 4-->
                        <div class="tile-spot" data-coord="(4,1)">1</div>
                        <div class="tile-spot" data-coord="(4,2)">1</div>
                        <div class="tile-spot" data-coord="(4,3)">1</div>
                        <div class="tile-spot" data-coord="(4,4)">1</div>
                        <div class="tile-spot" data-coord="(4,5)">1</div>
                        <div class="tile-spot" data-coord="(4,6)">1</div>
                        <div class="tile-spot" data-coord="(4,7)">1</div>
                        <div class="tile-spot" data-coord="(4,8)">1</div>

                        <!--row 5-->
                        <div class="tile-spot" data-coord="(5,1)">1</div>
                        <div class="tile-spot" data-coord="(5,2)">1</div>
                        <div class="tile-spot" data-coord="(5,3)">1</div>
                        <div class="tile-spot" data-coord="(5,4)">1</div>
                        <div class="tile-spot" data-coord="(5,5)">1</div>
                        <div class="tile-spot" data-coord="(5,6)">1</div>
                        <div class="tile-spot" data-coord="(5,7)">1</div>
                        <div class="tile-spot" data-coord="(5,8)">1</div>

                        <!--row 6-->
                        <div class="tile-spot" data-coord="(6,1)">1</div>
                        <div class="tile-spot" data-coord="(6,2)">1</div>
                        <div class="tile-spot" data-coord="(6,3)">1</div>
                        <div class="tile-spot" data-coord="(6,4)">1</div>
                        <div class="tile-spot" data-coord="(6,5)">1</div>
                        <div class="tile-spot" data-coord="(6,6)">1</div>
                        <div class="tile-spot" data-coord="(6,7)">1</div>
                        <div class="tile-spot" data-coord="(6,8)">1</div>

                        <!--row 7-->
                        <div class="tile-spot" data-coord="(7,1)">1</div>
                        <div class="tile-spot" data-coord="(7,2)">1</div>
                        <div class="tile-spot" data-coord="(7,3)">1</div>
                        <div class="tile-spot" data-coord="(7,4)">1</div>
                        <div class="tile-spot" data-coord="(7,5)">1</div>
                        <div class="tile-spot" data-coord="(7,6)">1</div>
                        <div class="tile-spot" data-coord="(7,7)">1</div>
                        <div class="tile-spot" data-coord="(7,8)">1</div>

                        <!--row 8-->
                        <div class="tile-spot" data-coord="(8,1)">1</div>
                        <div class="tile-spot" data-coord="(8,2)">1</div>
                        <div class="tile-spot" data-coord="(8,3)">1</div>
                        <div class="tile-spot" data-coord="(8,4)">1</div>
                        <div class="tile-spot" data-coord="(8,5)">1</div>
                        <div class="tile-spot" data-coord="(8,6)">1</div>
                        <div class="tile-spot" data-coord="(8,7)">1</div>
                        <div class="tile-spot" data-coord="(8,8)">1</div>
                    </div>
                    <div id="arrow-down">
                        <button type="button">Down</button>
                    </div>
                    <div id="arrow-right">
                        <button type="button">Right</button>
                    </div>
                </section>
                <section id="hand">
                    <div id="tile-slot">
                        <img class="tile" alt="tile" src="/src/public/images/tileset/TilePieceQB1.png">
                    </div>
                    <div id="tile-slot">
                        <img class="tile" alt="tile" src="/src/public/images/tileset/TilePieceQB1.png">
                    </div>
                    <div id="tile-slot">
                        <img class="tile" alt="tile" src="/src/public/images/tileset/TilePieceQB1.png">
                    </div>
                    <div id="tile-slot">
                        <img class="tile" alt="tile" src="/src/public/images/tileset/TilePieceQB1.png">
                    </div>
                    <div id="tile-slot">
                        <img class="tile" alt="tile" src="/src/public/images/tileset/TilePieceQB1.png">
                    </div>
                    <div id="tile-slot">
                        <img class="tile" alt="tile" src="/src/public/images/tileset/TilePieceQB1.png">
                    </div>
                </section>
            </section>
            <section id="sidebar">
                <section id="leave">
                    <button type="button" onclick="">Leave</button>
                </section>
                <section id="chat">
                    chat here
                </section>
                <section id="end-turn">
                    <button type="button" onclick="">End Turn</button>
                </section>
            </section>
        </section>
        <script>
            
            const tiles = document.getElementsByClassName("tile");
            const tile_slots = document.getElementsByClassName("tile-spot");
            const tilesArr = Array.from(tiles);
            const slotsArr = Array.from(tile_slots);

            let tileSelected = false;
            let startX, startY;
            let tileObj;

            var click_count_tile = 0;
            var click_count_slot = 0;

            tilesArr.forEach((clickTile) => {
                clickTile.addEventListener("mousedown", (e) => {

                    click_count_tile++;
                    console.log("clicked tile: " + click_count_tile);

                    tileSelected = true;
                    tileObj = e;

                    startX = e.clientX - e.offsetLeft;
                    startY = e.clientY - e.offsetTop;
                });
            });

            slotsArr.forEach((clickSlot) => {
                clickSlot.addEventListener("mousedown",(e) => {

                    console.log("clicked tile_slot: " + clickSlot.dataset.coord);

                    if (tileSelected) {

                        tileSelected=false;

                        console.log("attempt placing at: " + clickSlot.dataset.coord);

                        const x = e.clientX - startX;
                        const y = e.clientY - startY;

                        tileObj.style.left = `${x}px`;
                        tileObj.style.top = `${y}px`;
                    }
                });
            });
        </script>
	</body>
</html>